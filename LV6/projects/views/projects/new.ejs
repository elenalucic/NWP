<% include ../partials/header %>

<h1 class="mb-4">Novi projekt</h1>

<form action="/projects" method="POST" class="row g-3">
  <div class="col-12">
    <label for="naziv" class="form-label">Naziv</label>
    <input type="text" class="form-control" id="naziv" name="naziv" required>
  </div>
  <div class="col-12">
    <label for="opis" class="form-label">Opis</label>
    <textarea class="form-control" id="opis" name="opis"></textarea>
  </div>
  <div class="col-md-6">
    <label for="cijena" class="form-label">Cijena (€)</label>
    <input type="number" class="form-control" id="cijena" name="cijena">
  </div>
  <div class="col-md-6">
    <label for="datumPocetka" class="form-label">Datum početka</label>
    <input type="date" class="form-control" id="datumPocetka" name="datumPocetka">
  </div>
  <div class="col-md-6">
    <label for="datumZavrsetka" class="form-label">Datum završetka</label>
    <input type="date" class="form-control" id="datumZavrsetka" name="datumZavrsetka">
  </div>
  
  <!-- Task List Input -->
  <div class="col-12">
    <label class="form-label">Zadaci</label>
    <div id="task-list">
      <div class="task-item mb-2">
        <input type="text" class="form-control" name="tasks[0][description]" placeholder="Opis zadatka">
      </div>
    </div>
    <button type="button" class="btn btn-secondary mt-2" onclick="addTask()">Dodaj zadatak</button>
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-success">Spremi projekt</button>
  </div>
</form>

<script>
function addTask() {
  const taskList = document.getElementById('task-list');
  const taskCount = taskList.children.length;
  const taskDiv = document.createElement('div');
  taskDiv.className = 'task-item mb-2';
  taskDiv.innerHTML = `<input type="text" class="form-control" name="tasks[${taskCount}][description]" placeholder="Opis zadatka">`;
  taskList.appendChild(taskDiv);
}
</script>

<% include ../partials/footer %>